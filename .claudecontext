# AnimaLineage - Application de Gestion d'Ã‰levage

## Vue d'ensemble
Application web full-stack moderne pour la gestion professionnelle d'Ã©levages avec interface React/TypeScript et API PHP robuste.

## Architecture
```
AnimaLineage/
â”œâ”€â”€ frontend/           # Application React TypeScript (port 3002)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/ # Composants React modulaires
â”‚   â”‚   â”‚   â”œâ”€â”€ Auth.tsx              # Authentification
â”‚   â”‚   â”‚   â”œâ”€â”€ MainDashboard.tsx     # Tableau de bord principal
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminPanel.tsx        # Interface d'administration
â”‚   â”‚   â”‚   â”œâ”€â”€ ElevageForm.tsx       # Gestion des Ã©levages
â”‚   â”‚   â”‚   â”œâ”€â”€ AnimalForm.tsx        # Gestion des animaux
â”‚   â”‚   â”‚   â”œâ”€â”€ AnimalList.tsx        # Liste des animaux
â”‚   â”‚   â”‚   â”œâ”€â”€ RaceForm.tsx          # Gestion des races
â”‚   â”‚   â”‚   â””â”€â”€ TypeAnimalForm.tsx    # Types d'animaux
â”‚   â”‚   â”œâ”€â”€ contexts/   # Gestion d'Ã©tat global
â”‚   â”‚   â”‚   â””â”€â”€ AuthContext.tsx       # Contexte d'authentification
â”‚   â”‚   â””â”€â”€ utils/      # Fonctions utilitaires
â”‚   â”‚       â””â”€â”€ auth.ts               # Utilitaires d'authentification
â”‚   â”œâ”€â”€ package.json    # DÃ©pendances Node.js
â”‚   â””â”€â”€ build/          # Build de production
â”œâ”€â”€ backend/            # API REST PHP (port 3001)
â”‚   â”œâ”€â”€ controllers/    # ContrÃ´leurs MVC
â”‚   â”‚   â”œâ”€â”€ UserController.php        # Gestion utilisateurs
â”‚   â”‚   â”œâ”€â”€ AuthController.php        # Authentification
â”‚   â”‚   â”œâ”€â”€ AdminController.php       # Administration
â”‚   â”‚   â”œâ”€â”€ ElevageController.php     # Gestion Ã©levages
â”‚   â”‚   â””â”€â”€ AnimalController.php      # Gestion animaux
â”‚   â”œâ”€â”€ models/         # ModÃ¨les de donnÃ©es
â”‚   â”‚   â”œâ”€â”€ User.php                  # ModÃ¨le utilisateur
â”‚   â”‚   â”œâ”€â”€ Animal.php                # ModÃ¨le animal
â”‚   â”‚   â”œâ”€â”€ Elevage.php               # ModÃ¨le Ã©levage
â”‚   â”‚   â”œâ”€â”€ Race.php                  # ModÃ¨le race
â”‚   â”‚   â””â”€â”€ TypeAnimal.php            # ModÃ¨le type animal
â”‚   â”œâ”€â”€ config/         # Configuration systÃ¨me
â”‚   â”‚   â”œâ”€â”€ database.php              # Configuration BDD
â”‚   â”‚   â””â”€â”€ env.php                   # Variables d'environnement
â”‚   â”œâ”€â”€ migrations/     # Migrations de schÃ©ma
â”‚   â”œâ”€â”€ middleware/     # Middleware sÃ©curitÃ©
â”‚   â”‚   â””â”€â”€ AuthMiddleware.php        # Authentification JWT
â”‚   â”œâ”€â”€ database/       # Base de donnÃ©es SQLite
â”‚   â””â”€â”€ index.php       # Point d'entrÃ©e et routeur API
â”œâ”€â”€ docs/               # Documentation projet
â”‚   â”œâ”€â”€ ARCHITECTURE.md               # Architecture systÃ¨me
â”‚   â””â”€â”€ CONVENTIONS.md                # Conventions de code
â”œâ”€â”€ scripts/            # Scripts utilitaires
â””â”€â”€ .nvmrc              # Version Node.js recommandÃ©e
```

## SÃ©curitÃ©
La sÃ©curitÃ© est la prioritÃ© de tout dÃ©veloppement.
Les actions transmises par le frontend doivent Ãªtre vÃ©rifiÃ©es par le backend pour se prÃ©munir d'une tentative de piratage et/ou de corruption de donnÃ©es et/ou d'escalade de droits.

## Stack Technique

### Frontend (React/TypeScript)
- **React 19.1.1** avec TypeScript 4.9.5
- **React Testing Library** pour les tests unitaires
- **CSS modules** pour le styling modulaire
- **Context API** pour la gestion d'Ã©tat global
- **Fetch API** pour les appels HTTP
- **ESLint & Prettier** pour la qualitÃ© du code

### Backend (PHP)
- **PHP 7.4+** avec architecture MVC orientÃ©e objet
- **PDO** pour l'abstraction base de donnÃ©es
- **JWT (firebase/php-jwt)** pour l'authentification stateless
- **Architecture REST** pour l'API
- **Support multi-SGBD** (SQLite/MySQL/PostgreSQL)
- **Migrations automatiques** pour le schÃ©ma de donnÃ©es

## ModÃ¨les de DonnÃ©es

### EntitÃ©s principales
- **User** : Utilisateurs avec systÃ¨me de validation par statut
  - Statuts : `0` (en attente), `1` (validÃ©), `2` (rejetÃ©)
  - RÃ´les : administrateur, Ã©leveur, consultant
  - Authentification JWT sÃ©curisÃ©e

- **Elevage** : Structures d'Ã©levage
  - Informations complÃ¨tes (nom, adresse, contact)
  - Liaison avec utilisateurs propriÃ©taires
  - Gestion multi-Ã©levage par utilisateur

- **Animal** : Animaux individuels
  - DonnÃ©es complÃ¨tes (identification, gÃ©nÃ©alogie)
  - Liaison avec Ã©levage et race
  - Historique et suivi sanitaire

- **Race** : Races d'animaux
  - Classification par type d'animal
  - CaractÃ©ristiques spÃ©cifiques

- **TypeAnimal** : Types d'animaux
  - CatÃ©gories principales (bovins, ovins, etc.)
  - Structuration hiÃ©rarchique

## FonctionnalitÃ©s Principales

### Authentification & Autorisation
- **SystÃ¨me JWT** avec tokens sÃ©curisÃ©s
- **Middleware d'authentification** sur toutes les routes protÃ©gÃ©es
- **Gestion des rÃ´les** avec contrÃ´le d'accÃ¨s granulaire
- **Comptes en attente** avec systÃ¨me de validation administrateur

### Gestion d'Ã‰levage
- **CRUD complet** pour Ã©levages, animaux, races et types
- **Interface intuitive** avec formulaires validÃ©s
- **Recherche et filtrage** avancÃ©s
- **Tableau de bord** avec vue d'ensemble

### Administration
- **Panel d'administration** pour la gestion des utilisateurs
- **Validation des comptes** en attente
- **Gestion des permissions** et rÃ´les
- **Monitoring** des activitÃ©s

### SÃ©curitÃ© & Performance
- **Validation cÃ´tÃ© client et serveur**
- **Ã‰chappement des donnÃ©es** avec requÃªtes prÃ©parÃ©es
- **Interface responsive** pour tous les appareils
- **Gestion d'erreurs** robuste

## Configuration

### DÃ©veloppement
- Backend: `php -S localhost:3001` dans /backend
- Frontend: `npm start` dans /frontend (dÃ©marre sur port 3002)
- Base de donnÃ©es: SQLite automatique (backend/database/webapp.db)

### Production
- Variables d'environnement dans backend/.env
- Support MySQL/PostgreSQL
- Build frontend avec `npm run build`

## Scripts disponibles
- Frontend: start, build, test, eject
- Backend: migrate.php pour les migrations

## SÃ©curitÃ©
- Authentification JWT
- Validation des entrÃ©es
- CORS configurÃ©
- Middleware d'autorisation

## Ã‰tat Actuel du Projet

### Statut de DÃ©veloppement
- âœ… **Application fonctionnelle** en production
- âœ… **Backend sÃ©curisÃ©** sans vulnÃ©rabilitÃ©s connues
- âœ… **Documentation complÃ¨te** et Ã  jour
- âš ï¸ **DÃ©pendances frontend** : vulnÃ©rabilitÃ©s mineures identifiÃ©es
- âœ… **Tests unitaires** configurÃ©s (React Testing Library)

### Architecture ValidÃ©e
- âœ… **SÃ©paration frontend/backend** claire
- âœ… **API REST** complÃ¨te et documentÃ©e
- âœ… **Base de donnÃ©es** multi-environnement
- âœ… **Authentification JWT** robuste
- âœ… **Interface responsive** validÃ©e

## Points d'Attention

### SÃ©curitÃ©
- ğŸ”’ **Authentification** : JWT avec middleware obligatoire
- ğŸ”’ **Validation** : cÃ´tÃ© client ET serveur
- ğŸ”’ **Base de donnÃ©es** : requÃªtes prÃ©parÃ©es exclusivement
- ğŸ”’ **CORS** : configuration stricte

### Maintenance
- ğŸ“‹ **DÃ©pendances** : audit rÃ©gulier recommandÃ© (voir dependency-audit-2025-09-19.md)
- ğŸ“‹ **Configuration** : variables d'environnement via fichiers .env
- ğŸ“‹ **Migrations** : automatiques au dÃ©marrage
- ğŸ“‹ **Documentation** : maintien Ã  jour obligatoire
- ğŸ“‹ **Versioning** : commit aprÃ¨s chaque modification significative

### Performance
- âš¡ **Frontend** : optimisation React (memoization, lazy loading)
- âš¡ **Backend** : requÃªtes SQL optimisÃ©es
- âš¡ **Base de donnÃ©es** : index appropriÃ©s

